# Pre-commit hooks configuration
# See https://pre-commit.com for more information

repos:
  # Ruff: Fast Python linter and formatter (replaces flake8, isort, black, etc.)
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.5
    hooks:
      - id: ruff
        args: [--fix]
      - id: ruff-format

  # Local hooks for mypy and pytest (using project's uv environment)
  - repo: local
    hooks:
      # Mypy: Static type checking
      - id: mypy
        name: mypy (type checking)
        entry: uv run mypy src
        language: system
        pass_filenames: false
        always_run: true
        stages: [pre-commit]

      # Fast pytest: Run only fast tests (exclude slow integration tests)
      - id: pytest-fast
        name: pytest (fast tests)
        entry: uv run pytest -x -q --ignore=tests/test_imagegen.py --ignore=tests/test_imageedit_api.py
        language: system
        pass_filenames: false
        always_run: true
        stages: [pre-commit]

      # Full pytest: Run complete test suite on push
      - id: pytest-full
        name: pytest (full suite)
        entry: uv run pytest
        language: system
        pass_filenames: false
        always_run: true
        stages: [pre-push]
